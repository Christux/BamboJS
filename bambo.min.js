/*!
BamboJS

Description : Light javascript module builder
Author : Christophe Rubeck
Version : 1.2
Date : 2018 march 11
See : https://github.com/Christux/BamboJS
*/
!function(n){"use strict";function t(n){return"object"==typeof n&&!Array.isArray(n)&&null!==n}
function r(n){return Array.isArray(n)}function e(n){return"string"==typeof n}function o(n){
return"function"==typeof n}function i(n){return"boolean"==typeof n}function u(n){
return"number"==typeof n}function s(n){return void 0===n||null===n}function c(n,e){
if(!t(n)&&!r(n))throw new Error("First parameter must be an array or an object")
;if(!o(e))throw new Error("Second parameter must be a function")
;if(r(n))for(var i=0,u=n.length;i<u;i++)e(n[i],i);if(t(n)){i=0
;for(var s in n)n.hasOwnProperty(s)&&e(n[s],i++)}}function a(){function n(n){
window.document.body.scrollTop=n,window.document.documentElement.scrollTop=n}function t(){
return window.pageYOffset}return function(){var n=l(this)
;return window.addEventListener("scroll",function(){n.notifyAll(t())},!1),this}.call({set:n,get:t,
reset:function(){n(0)}})}function f(){return{create:l}}function l(n){function t(n){
if(!o(n))throw new Error("Handler must be a function");i.push(n)}function r(n){
if(!o(n))throw new Error("Handler must be a function");i=i.filter(function(t){return t!==n})}
function e(){var n=arguments;c(i,function(t){o(t)&&t.apply(this,n)})}var i=[];return function(){
return this.registerHandler=t,this.unregisterHandler=r,this.notifyAll=e,this}.call(n||{})}
function d(){function n(){return window.location.hash.split("#")[1]}return function(){var t=l(this)
;return window.addEventListener("hashchange",function(){t.notifyAll(n())},!1),this}.call({
getAnchor:n,get:n})}function h(){return{get:function(n){
if(!e(n))throw new Error("Url must be a string");return w("GET",n,null)},post:function(n,t){
if(!e(n))throw new Error("Url must be a string");return w("POST",n,t)}}}function w(n,t,r){
var e,i,u,s=new XMLHttpRequest;r=r||null;return function(){return s.onreadystatechange=function(){
s.readyState===s.DONE&&(200===s.status?e&&o(e)&&e(s.responseText):i&&o(i)&&i(s.status+" "+s.statusText))
},s.onerror=function(n){i&&o(i)&&i(n.error)},s.ontimeout=function(n){u&&o(u)&&u(n)},this}.call({
success:function(n){return e=n,this},error:function(n){return i=n,this},timeout:function(n){
return u=n,this},setTimeout:function(n){return s.timeout=n,this},send:function(){s.open(n,t,!0),
s.send(r)}})}function g(){function n(n){r(n);var t=o.hasOwnProperty(n)
;if(!t)throw new Error("Action "+n+" does not exist !");return t}function t(n){r(n),
o.hasOwnProperty(n)||(o[n]=l())}function r(n){
if(!e(n))throw new Error("Action parameter must be a string !")}var o={};return function(){
return this}.call({registerHandler:function(n,r){t(n),o[n].registerHandler(r)},
unregisterHandler:function(t,r){n(t)&&o[t].unregisterHandler(r)},notifyAll:function(t){
n(t)&&o[t].notifyAll()},isActionRegistered:function(n){return r(n),o.hasOwnProperty(n)},
registerAction:function(n){t(n)}})}function p(){function n(n){
clearTimeout(i),e+=n?n.keyCode:event.keyCode,
i=setTimeout(t,1e3),e.length>r.length&&(e=e.substr(e.length-r.length)),
e===r&&(console.log("Konami activated"),o.notifyAll(),t(),n.preventDefault())}function t(){
clearTimeout(i),e=""}var r="38384040373937396665",e="",o=l(),i=null;return function(){
return document.addEventListener("keydown",n),this}.call({registerHandler:o.registerHandler,
unregisterHandler:o.unregisterHandler})}
if(n.hasOwnProperty("bambo"))throw new Error("Library BamboJS is already loaded !")
;n.bambo=function(){function n(n){return function(){l.forEachModules(function(t){
if(t.isInstanciated()){var r=t.getInstance();r.hasOwnProperty(n)&&l.resolve(r[n])}})}}
var l=function(){function n(n,r,e,o){function c(){return t(o)}var o=o||void 0;return{
getInstance:function(e){return c()||(o=function(e){var e=u(e)?e+1:0,o=i(r,[],s,{},e)
;if(!t(o))throw new Error("Module "+n+" constructor is not correctly defined, it must return an object")
;return o}(e)),o},isInstanciated:function(){return c()},loadOnStartup:function(){return e}}}
function i(n,t,i,u,s){if(s>1e3)throw new Error("Loop in module dependencies detected");if(r(n)){
var a=n,n=a[a.length-1],t=a.slice(0,a.length-1)
;if(!o(n))throw new Error("Last element must be a function")}else{var t=t||[]
;if(n.hasOwnProperty("$inject")&&(t=n.$inject,
!r(t)))throw new Error("$inject parameter must be an array")}
if(!o(n))throw new Error("First element must be a function")
;if(!r(t))throw new Error("Dependency parameter must be an array of strings");return function(n,t){
return n.apply(this,t)}(n,function(n,t,r,o){var i=[];return c(n,function(n){
if(!e(n))throw new Error("Dependency must be a string")
;if(t.hasOwnProperty(n))i.push(t[n].getInstance(o));else{
if(!r.hasOwnProperty(n))throw new Error("Dependency module "+n+" not found !");i.push(r[n])}}),i
}(t,i||{},u||{},s))}var s={};return function(){return s.$injector=n("$injector",null,!1,this),this
}.call({register:function(t,r,e){!function(n,t){
if(s.hasOwnProperty(n))throw new Error("Module "+n+" is already registered");s[n]=t}(t,n(t,r,e||!1))
},resolve:function(n,t,r){return i(n,t,s,r,0)},forEachModules:function(n){c(s,function(t){
n.apply(this,[t])})}})}();return function(){l.register("$http",h),l.register("$scroll",a),
l.register("$observer",f),l.register("$location",d),l.register("$flux",g),l.register("$konami",p)
;var t=n("$init"),r=n("$build"),e=n("$final");return window.addEventListener("load",function(){
l.forEachModules(function(n){n.loadOnStartup()&&n.getInstance()}),t(),r(),e()},!1),this}.call({
module:function(n,t,r){if(!e(n)||""===n)throw new Error("Module name must be a string")
;return l.register(n,t,!i(r)||r),this},isString:e,isObject:t,isArray:r,isFunction:o,isBoolean:i,
isNumber:u,isUndefinedOrNull:s,forEach:c})}()}(this);