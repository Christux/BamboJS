/*!
BamboJS

Description : Light javascript module builder
Author : Christophe Rubeck
Version : 1.0
Date : 2018 jan 21
See : https://github.com/Christux/BamboJS
*/
!function(n){"use strict";function r(n){return"object"==typeof n&&!Array.isArray(n)&&null!==n}
function t(n){return Array.isArray(n)}function e(n){return"string"==typeof n}function o(n){
return"function"==typeof n}function i(n){return"boolean"==typeof n}function u(n){
return"number"==typeof n}function s(n,e){
if(!r(n)&&!t(n))throw new Error("First parameter must be an array or an object")
;if(!o(e))throw new Error("Second parameter must be a function")
;if(t(n))for(var i=0,u=n.length;i<u;i++)e(n[i],i);if(r(n)){i=0
;for(var s in n)n.hasOwnProperty(s)&&(e(n[s],i),i++)}}function c(){function n(n){
window.document.body.scrollTop=n,window.document.documentElement.scrollTop=n}function r(){
return window.pageYOffset}return function(){var n=f(this)
;return window.addEventListener("scroll",function(){n.notifyAll(r())},!1),this}.call({set:n,get:r,
reset:function(){n(0)}})}function a(){return{create:f}}function f(n){function r(n){
if(!o(n))throw new Error("Handler must be a function");i.push(n)}function t(n){
if(!o(n))throw new Error("Handler must be a function");i=i.filter(function(r){return r!==n})}
function e(){var n=arguments;s(i,function(r){o(r)&&r.apply(this,n)})}var i=[];return function(){
return this.registerHandler=r,this.unregisterHandler=t,this.notifyAll=e,this}.call(n||{})}
function l(){function n(){return window.location.hash.split("#")[1]}return function(){var r=f(this)
;return window.addEventListener("hashchange",function(){r.notifyAll(n())},!1),this}.call({
getAnchor:n,get:n})}function h(){return{get:function(n){
if(!e(n))throw new Error("Url must be a string");return d("GET",n,null)},post:function(n,r){
if(!e(n))throw new Error("Url must be a string");return d("POST",n,r)}}}function d(n,r,t){
var e,i,u,s=new XMLHttpRequest;t=t||null;return function(){return s.onreadystatechange=function(){
s.readyState===s.DONE&&(200===s.status?e&&o(e)&&e(s.responseText):i&&o(i)&&i(s.status+" "+s.statusText))
},s.onerror=function(n){i&&o(i)&&i(n.error)},s.ontimeout=function(n){u&&o(u)&&u(n)},this}.call({
success:function(n){return e=n,this},error:function(n){return i=n,this},timeout:function(n){
return u=n,this},setTimeout:function(n){return s.timeout=n,this},send:function(){s.open(n,r,!0),
s.send(t)}})}function w(){function n(n){t(n);var r=o.hasOwnProperty(n)
;if(!r)throw new Error("Action "+n+" does not exist !");return r}function r(n){t(n),
o.hasOwnProperty(n)||(o[n]=f())}function t(n){
if(!e(n))throw new Error("Action parameter must be a string !")}var o={};return function(){
return this}.call({registerHandler:function(n,t){r(n),o[n].registerHandler(t)},
unregisterHandler:function(r,t){n(r)&&o[r].unregisterHandler(t)},notifyAll:function(r){
n(r)&&o[r].notifyAll()},isActionRegistered:function(n){return t(n),o.hasOwnProperty(n)},
registerAction:function(n){r(n)}})}
if(n.hasOwnProperty("bambo"))throw new Error("Library BamboJS is already loaded !")
;n.bambo=function(){function n(n){return function(){f.forEachModules(function(r){
if(r.isInstanciated()){var t=r.getInstance();t.hasOwnProperty(n)&&f.resolve(t[n])}})}}
var f=function(){function n(n,t,e){function o(){return r(e)}var e=e||void 0;return{
getInstance:function(r){var r=u(r)?r+1:0;return o()||(e=i(n,[],c,{},r)),e},
isInstanciated:function(){return o()},loadOnStartup:function(){return t}}}function i(n,r,i,u,c){
if(c>1e3)throw new Error("Loop in module dependencies detected");if(t(n)){
var a=n,n=a[a.length-1],r=a.slice(0,a.length-1)
;if(!o(n))throw new Error("Last element must be a function")}else{var r=r||[]
;if(n.hasOwnProperty("$inject")&&(r=n.$inject,
!t(r)))throw new Error("$inject parameter must be an array")}
if(!o(n))throw new Error("First element must be a function")
;if(!t(r))throw new Error("Dependency parameter must be an array of strings");return function(n,r){
return n.apply(this,r)}(n,function(n,r,t,o){var i=[];return s(n,function(n){
if(!e(n))throw new Error("Dependency must be a string")
;if(r.hasOwnProperty(n))i.push(r[n].getInstance(o));else{
if(!t.hasOwnProperty(n))throw new Error("Dependency module "+n+" not found !");i.push(t[n])}}),i
}(r,i||{},u||{},c))}var c={};return function(){return c.$injector=n(null,!1,this),this}.call({
register:function(t,e,o){!function(n,t){
if(c.hasOwnProperty(n))throw new Error("Module "+n+" is already registered")
;if(!r(t))throw new Error("Module "+n+" is not correctly defined, it must be an object");c[n]=t
}(t,n(e,o||!1))},resolve:function(n,r,t){return i(n,r,c,t,0)},forEachModules:function(n){
s(c,function(r){n.apply(this,[r])})}})}();return function(){f.register("$http",h),
f.register("$scroll",c),f.register("$observer",a),f.register("$location",l),f.register("$flux",w)
;var r=n("$init"),t=n("$build"),e=n("$final");return window.addEventListener("load",function(){
f.forEachModules(function(n){n.loadOnStartup()&&n.getInstance()}),r(),t(),e()},!1),this}.call({
module:function(n,r,t){if(!e(n)||""===n)throw new Error("Module name must be a string")
;return f.register(n,r,!i(t)||t),this},isString:e,isObject:r,isArray:t,isFunction:o,isBoolean:i,
isNumber:u,forEach:s})}()}(this);